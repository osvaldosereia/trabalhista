/* style.css ‚Äî polido */

/* ====== Tokens ====== */
:root{
  --bg:#f6f7fb;
  --card:#fff;
  --text:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;

  --primary:#2563eb;
  --primary-600:#1d4ed8;
  --success:#16a34a;
  --warning:#f59e0b;
  --danger:#ef4444;
  --info:#0ea5e9;

  --radius:14px;
  --shadow:0 10px 30px rgba(17,24,39,.06);
  --ring:0 0 0 4px rgba(37,99,235,.12);
}

/* ====== Reset ====== */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background:var(--bg);
  color:var(--text);
  line-height:1.55;
  font-family: system-ui,-apple-system,"Segoe UI",Inter,Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
  padding-bottom:72px;
}

/* ====== Header ====== */
header{ text-align:center; padding:2rem 1rem .75rem }
header h1{ font-size:1.9rem; letter-spacing:.3px; margin-bottom:.35rem }
header h1::before{ content:"üß† "; }
header p{ color:var(--muted); font-size:.98rem }
header .actions{ margin-top:.6rem; display:flex; justify-content:center; gap:.5rem }
#btn-reiniciar{ background:#111827; color:#fff; border-radius:999px; padding:.55rem 1rem; border:none; cursor:pointer }
#btn-reiniciar:hover{ opacity:.95; transform:translateY(-1px) }

/* ====== Tabs ====== */
.tabs{
  position:sticky; top:0; z-index:5;
  backdrop-filter:saturate(180%) blur(6px);
  background:linear-gradient(#ffffffcc,#ffffffcc);
  display:flex; flex-wrap:wrap; justify-content:center; gap:.45rem;
  margin: .85rem auto; padding:.55rem 0; border-top:1px solid #ffffffaa; border-bottom:1px solid var(--border)
}
.tabs button{
  border:1px solid var(--border);
  background:#fff; color:#1f2937;
  padding:.5rem 1rem; border-radius:999px; cursor:pointer;
  transition:.2s; font-weight:700; font-size:.9rem
}
.tabs button:hover{ border-color:#cbd5e1; transform:translateY(-1px) }
.tabs button.active{
  background:var(--primary); color:#fff; border-color:var(--primary);
  box-shadow:0 4px 14px rgba(37,99,235,.28)
}

/* ====== Container ====== */
main{
  max-width:1040px; margin:16px auto 32px;
  background:var(--card); border-radius:var(--radius);
  box-shadow:var(--shadow); padding:2rem
}
.tab-content{ display:none; animation:fade .18s ease-in }
.tab-content.active{ display:block }
@keyframes fade{ from{opacity:.6; transform:translateY(2px)} to{opacity:1; transform:translateY(0)} }
.tab-content h2{ color:var(--primary); font-size:1.35rem; margin-bottom:.55rem }
.tab-content p{ color:var(--muted); margin-bottom:1rem }

/* ====== Form & fieldsets ====== */
form{ display:grid; gap:.8rem; margin-bottom:1rem }
fieldset{
  border:1px solid var(--border); border-radius:12px; background:#fff;
  padding:1rem; margin-bottom:.8rem
}
legend{ padding:0 .5rem; color:var(--primary-600); font-weight:800; font-size:.95rem }

/* grid responsivo dentro de forms/fieldsets */
form, fieldset{
  --min: 240px;
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--min),1fr));
  gap:.8rem;
}
label{ display:flex; flex-direction:column; gap:.35rem; font-weight:600; font-size:.92rem; color:#111827 }
input, select, textarea{
  appearance:none;
  padding:.62rem .8rem;
  border:1px solid var(--border);
  border-radius:10px;
  background:#fff; color:var(--text);
  font-size:.95rem;
  transition:border .15s, box-shadow .15s;
}
input:focus,select:focus,textarea:focus{ outline:none; border-color:var(--primary); box-shadow:var(--ring) }

/* select com ‚Äúseta‚Äù */
select{
  background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 7l5 5 5-5' stroke='%236b7280' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position: right .6rem center;
  background-size:16px;
  padding-right:2rem;
}

/* ====== Actions ====== */
.actions{ display:flex; flex-wrap:wrap; gap:.6rem; margin:1rem 0 }
button{
  border:none; border-radius:10px; padding:.6rem 1.05rem;
  font-weight:700; cursor:pointer; transition:.18s; line-height:1
}
button:hover{ opacity:.96; transform:translateY(-1px) }
.btn-ia{ background:var(--primary); color:#fff }
.btn-save{ background:var(--success); color:#fff }
.btn-clear{ background:#f3f4f6; color:#374151; border:1px solid var(--border) }
#btn-recalcular{ background:var(--info); color:#fff }
#btn-pdf{ background:var(--warning); color:#fff }
#btn-google-ia{ background:#0284c7; color:#fff }

/* ====== Mini editor ====== */
.editor-area{
  border:1px solid var(--border); border-radius:12px; background:#fff; overflow:hidden;
  box-shadow:0 1px 5px rgba(0,0,0,.05)
}
.toolbar{ display:flex; gap:.45rem; padding:.45rem; border-bottom:1px solid var(--border); background:#f9fafb }
.toolbar button{
  background:#fff; border:1px solid var(--border);
  padding:.34rem .62rem; border-radius:8px; font-size:.9rem
}
.editor-mini{ min-height:170px; padding:.85rem; outline:none }
.editor-mini:focus{ background:#fbfdff }

/* ====== Fatos ====== */
.fato-bloco{
  background:#eef2ff; border:1px solid #c7d2fe; border-radius:12px;
  padding:.55rem .85rem; margin:.5rem 0; display:flex; justify-content:space-between; align-items:center;
}
.fato-bloco .titulo{ font-weight:800 }
.fato-bloco .remover{ background:transparent; border:none; color:var(--danger); font-size:1rem; cursor:pointer }
.fato-bloco:hover{ box-shadow:0 2px 8px rgba(99,102,241,.18) }

/* ====== Fundamentos/Pedidos categorizados ====== */
#fundamentos-box, #pedidos-box{ display:grid; gap:.7rem; margin-bottom:1rem }
#fundamentos-box details, #pedidos-box details{
  border:1px solid var(--border); border-radius:12px; background:#fff; overflow:hidden
}
#fundamentos-box summary, #pedidos-box summary{
  padding:.75rem .9rem; background:#f8fafc; font-weight:800; color:#334155;
  cursor:pointer; list-style:none; user-select:none; border-bottom:1px solid var(--border)
}
#fundamentos-box summary::-webkit-details-marker,
#pedidos-box summary::-webkit-details-marker{ display:none }
#fundamentos-box ul, #pedidos-box ul{ padding:.6rem .8rem }
#fundamentos-box li, #pedidos-box li{
  margin-left:1.1rem; margin-bottom:.28rem; cursor:pointer;
  transition:.15s; padding:.18rem .35rem; border-radius:6px
}
#fundamentos-box li:hover, #pedidos-box li:hover{ background:#e0f2fe }
#fundamentos-box li.ativo, #pedidos-box li.ativo{ background:#2563eb; color:#fff }

/* ====== Preliminares ====== */
.preliminares-ui{
  display:grid; gap:.6rem; grid-template-columns: 1fr auto; align-items:end; margin-bottom:.6rem
}
.preliminares-ui label{ grid-column:1/-1 }
#preliminares-list{
  grid-column:1/-1; border:1px solid var(--border); border-radius:12px; padding:.6rem;
  background:#fff; max-height:220px; overflow:auto
}
#preliminares-list li{ padding:.28rem .4rem; border-radius:6px }
#preliminares-list li:hover{ background:#f3f4f6 }

/* ====== C√°lculos ====== */
#tabela-wrap{ overflow-x:auto; border:1px solid var(--border); border-radius:12px; background:#fff }
#tabela-calculos{ width:100%; border-collapse:collapse }
#tabela-calculos th,#tabela-calculos td{
  border:1px solid var(--border); padding:.55rem; font-size:.95rem; text-align:left
}
#tabela-calculos th{ background:#f8fafc; color:#334155 }
#tabela-calculos tfoot td{ font-weight:800 }
#tabela-calculos input{
  width:100%; border:1px solid var(--border); border-radius:8px; padding:.28rem .4rem
}

/* ====== Visualizador final ====== */
#editor-final{
  border:1px solid var(--border); border-radius:12px; background:#fff; padding:1rem;
  min-height:320px; box-shadow:0 2px 10px rgba(0,0,0,.05); overflow-y:auto
}
#editor-final h3{ color:var(--primary); margin-top:1rem }

/* ====== Util ====== */
.hr{ height:1px; background:var(--border); margin:1rem 0 }

/* ====== Responsivo ====== */
@media (max-width:820px){
  main{ padding:1.1rem }
  .tabs{ gap:.3rem }
  .tabs button{ padding:.42rem .75rem; font-size:.86rem }
  form, fieldset{ --min: 190px }
}
/* Restabelece a renderiza√ß√£o nativa dos checkboxes nos campos din√¢micos */
.fato-campos-form input[type="checkbox"]{
  appearance: auto;            /* padr√£o */
  -webkit-appearance: checkbox;
  -moz-appearance: checkbox;
  opacity: 1;                  /* evita temas que deixam 0 */
  position: static;            /* evita switches custom */
  width: 16px; height: 16px;   /* tamanho previs√≠vel */
  vertical-align: middle;
  accent-color: #2563eb;       /* opcional: cor do check */
}

/* melhora clique no r√≥tulo */
.fato-campos-form label{
  display: flex;
  align-items: center;
  gap: .5rem;
}
.fato-campos-form label > span{ margin: 0; }
/* ===== Restauro de checkboxes ===== */
input[type="checkbox"]{
  appearance: auto !important;
  -webkit-appearance: checkbox !important;
  -moz-appearance: checkbox !important;
  width: auto !important;
  height: auto !important;
  margin: 0 .5rem 0 0;
  accent-color: #2563eb; /* opcional */
}

/* Melhor UX na se√ß√£o Provas */
#provas-box label{
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .25rem 0;
  cursor: pointer;
}
#provas-box input[type="checkbox"]{ margin-right: .5rem; }
/* Provas: layout em colunas */
#provas-box{
  display:grid;
  grid-template-columns: repeat(1, minmax(0,1fr));
  gap:8px 16px;
  text-align:left;
}

/* ‚â•768px: 2 colunas */
@media (min-width:768px){
  #provas-box{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}

/* ‚â•1024px: 3 colunas */
@media (min-width:1024px){
  #provas-box{ grid-template-columns: repeat(3, minmax(0,1fr)); }
}
/* Evita scroll horizontal global */
html, body { overflow-x: hidden; }

/* Main mais "fluido" no mobile */
@media (max-width: 480px){
  main{ margin:12px 8px 24px; padding:1rem; }
  form, fieldset{ --min: 160px; } /* grids quebram mais cedo */
}

/* Garante que blocos n√£o ‚Äúestourem‚Äù */
.tab-content, fieldset, .editor-area{ width:100%; max-width:100%; overflow-x:auto; }

/* Quebra palavras longas em textos e editores */
.editor-mini, #editor-final, p, li{ overflow-wrap:anywhere; word-break:break-word; }

/* Fato-bloco: permite quebra e encolhimento do t√≠tulo */
.fato-bloco{ flex-wrap: wrap; gap: .5rem; }
.fato-bloco .titulo{ min-width:0; overflow-wrap:anywhere; }

/* Listas de fundamentos/pedidos: margens compactas no mobile */
@media (max-width: 480px){
  #fundamentos-box ul, #pedidos-box ul{ padding:.5rem; }
  #fundamentos-box li, #pedidos-box li{ margin-left:.6rem; }
}

/* Imagens, tabelas e iframes nunca excedem o container */
img, table, iframe{ max-width:100%; height:auto; }
/* ===== Anti-overflow global ===== */
html, body { overflow-x: hidden; }
* { max-width: 100%; }

/* Quebra qualquer palavra longa/sem espa√ßos */
body, main, .tab-content, .editor-mini, #editor-final,
label, p, li, h1, h2, h3, h4, h5, h6, button, .tabs, .fato-bloco {
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* Inputs 100% do container */
input[type="text"], input[type="email"], input[type="number"],
input[type="date"], select, textarea {
  width: 100%;
  max-width: 100%;
}

/* Select n√£o estoura e mant√©m seta vis√≠vel */
select {
  white-space: normal;     /* permite quebrar r√≥tulos longos do <option> exibido */
  text-overflow: clip;
}

/* Tabs sempre quebram linha e n√£o ‚Äúesticam‚Äù */
.tabs { flex-wrap: wrap; overflow-x: hidden; }
.tabs button { min-width: 0; max-width: 100%; white-space: normal; }

/* Blocos e editores nunca passam do container */
.tab-content, fieldset, .editor-area { width: 100%; max-width: 100%; overflow-x: auto; }

/* Fatos: t√≠tulo pode quebrar e o bloco se adapta */
.fato-bloco { flex-wrap: wrap; gap: .5rem; }
.fato-bloco .titulo { min-width: 0; }

/* Listas de fundamentos/pedidos compactas no mobile */
@media (max-width: 480px){
  main { margin:12px 8px 24px; padding:1rem; }
  form, fieldset { --min: 160px; }
  #fundamentos-box ul, #pedidos-box ul { padding:.5rem; }
  #fundamentos-box li, #pedidos-box li { margin-left:.6rem; }
}

/* M√≠dia e tabelas responsivas */
img, table, iframe { max-width: 100%; height: auto; }

/* ====== Menu Orientar I.A. ====== */
.ia-menu{
  position: absolute;
  z-index: 10;
  margin-top: .5rem;
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--shadow);
  padding: .5rem;
  display: grid;
  gap: .25rem;
  max-width: min(420px, 90vw);
}
.ia-menu[hidden]{ display:none; }
.ia-menu button{
  text-align: left;
  border: 1px solid var(--border);
  background: #fff;
  padding: .45rem .6rem;
  border-radius: 8px;
  cursor: pointer;
}
.ia-menu button:hover{ background:#f8fafc; }
